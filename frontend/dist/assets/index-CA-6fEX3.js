const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DO1XHqEM.js","assets/navbars-F_vH8I19.js","assets/index-sS0S8N7K.js","assets/shapes-7Z1ZtB9Y.js","assets/notification--NRigmGR.js","assets/index-DUtDe3VG.js","assets/index-DmvuaRNo.js","assets/index-BBGymJWs.js","assets/createTournament--Py8A8fq.js","assets/viewTournament-ChXVlI4y.js","assets/tournamentGame-lXFt_Iu8.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const P="modulepreload",L=function(n){return"/"+n},E={},l=function(e,o,c){let t=Promise.resolve();if(o&&o.length>0){let a=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),h=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));t=a(o.map(d=>{if(d=L(d),d in E)return;E[d]=!0;const p=d.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const u=document.createElement("link");if(u.rel=p?"stylesheet":P,p||(u.as="script"),u.crossOrigin="",u.href=d,h&&u.setAttribute("nonce",h),document.head.appendChild(u),p)return new Promise((S,I)=>{u.addEventListener("load",S),u.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return t.then(a=>{for(const i of a||[])i.status==="rejected"&&r(i.reason);return e().catch(r)})};function b(n,e){sessionStorage.setItem(n,e)}function m(n){return sessionStorage.getItem(n)}function A(n){sessionStorage.removeItem(n)}let s=null,v;function w(n){if(s)return;const e=`wss://${window.location.hostname}/api/ws`;s=new WebSocket(e,n),g()}function C(n,e){const o=`wss://${window.location.hostname}/api/ws/match/${e}`;s=new WebSocket(o,n),g()}function g(){s&&(s.onopen=()=>{v=setInterval(()=>{(s==null?void 0:s.readyState)===WebSocket.OPEN&&s.send(JSON.stringify({type:"ping"}))},5e3)},s.onerror=()=>{},s.onclose=()=>{clearInterval(v),s=null},s.onmessage=n=>{try{const e=JSON.parse(n.data);if(e.type==="pong")return;if(e.type==="paddle_move"){const{role:o,z:c}=e,t=new CustomEvent("paddle_move",{detail:{role:o,z:c}});window.dispatchEvent(t)}else if(e.type==="ball_update"){const{position:o,direction:c}=e,t=new CustomEvent("ball_update",{detail:{position:o,direction:c}});window.dispatchEvent(t)}else if(e.type==="tournament_started"&&e.redirectTo)window.location.href=e.redirectTo;else if(e.type==="redirect"){const{url:o}=e;window.location.href=o}else if(e.type==="goal"){const o=new CustomEvent("goal",{detail:{scorer:e.scorer,scores:e.scores}});window.dispatchEvent(o)}else if(e.type==="score_update"){const o=new CustomEvent("score_update",{detail:{scores:e.scores}});window.dispatchEvent(o)}else if(e.type==="paddle_positions"){const o=new CustomEvent("paddle_positions",{detail:{paddle1z:e.paddle1z,paddle2z:e.paddle2z}});window.dispatchEvent(o)}}catch{}})}function O(){s&&(s.close(),s=null)}function T(){return s}function y(n){return m("2fa")==="true"&&m("2faCode")==="false"?!n:!!n}async function _(){const n=document.getElementById("app"),e=window.location.pathname,o=m("token");let c;if(c=y(o),c&&!T()&&o&&w(o),c&&(e==="/"||e==="/register")){history.pushState(null,"","/home"),l(()=>import("./index-DO1XHqEM.js"),__vite__mapDeps([0,1])).then(t=>t.render(n));return}if(!c&&e!=="/"&&e!=="/register"){history.pushState(null,"","/"),l(()=>import("./index-sS0S8N7K.js"),__vite__mapDeps([2,3,4])).then(t=>t.render(n));return}if(e==="/")l(()=>import("./index-sS0S8N7K.js"),__vite__mapDeps([2,3,4])).then(t=>t.render(n));else if(e==="/register")l(()=>import("./index-DUtDe3VG.js"),__vite__mapDeps([5,3,4])).then(t=>t.render(n));else if(e==="/home")l(()=>import("./index-DO1XHqEM.js"),__vite__mapDeps([0,1])).then(t=>t.render(n));else if(e==="/profile")l(()=>import("./index-DmvuaRNo.js"),__vite__mapDeps([6,1,4])).then(t=>t.render(n));else if(e==="/settings")l(()=>import("./index-BBGymJWs.js"),__vite__mapDeps([7,1])).then(t=>t.render(n));else if(e==="/404")l(()=>import("./404-D6-qsDhx.js"),[]).then(t=>t.render(n));else if(e==="/tournament/create")l(()=>import("./createTournament--Py8A8fq.js"),__vite__mapDeps([8,1,3,4])).then(async t=>{const r=document.getElementById("app");r.innerHTML="",r.appendChild(await t.createTournamentUI())});else if(e.startsWith("/tournament/")&&!e.includes("/game")){const t=e.split("/")[2],r=Number(e.split("/")[3]);l(()=>import("./viewTournament-ChXVlI4y.js"),__vite__mapDeps([9,1,3,4])).then(a=>{const i=document.getElementById("app");i&&a.renderTournamentPage(i,t,r)})}else if(e.startsWith("/tournament/game/")){const t=e.split("/")[3];l(()=>import("./tournamentGame-lXFt_Iu8.js"),__vite__mapDeps([10,1,4])).then(r=>{const a=document.getElementById("app");a&&r.renderTournamentGamePage(a,t)})}else history.pushState(null,"","/404"),l(()=>import("./404-D6-qsDhx.js"),[]).then(t=>t.render(n))}const R=Object.freeze(Object.defineProperty({__proto__:null,checkTwoFA:y,router:_},Symbol.toStringTag,{value:"Module"}));window.addEventListener("DOMContentLoaded",()=>{sessionStorage.getItem("initialized")||(sessionStorage.clear(),sessionStorage.setItem("initialized","true"));const n=m("token");n&&w(n),_(),window.addEventListener("popstate",_)});window.addEventListener("beforeunload",()=>{O()});export{l as _,T as a,C as b,w as c,O as d,A as e,m as g,R as r,b as s};
